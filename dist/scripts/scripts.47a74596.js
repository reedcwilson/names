"use strict";angular.module("clientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angular-flot","ui-rangeSlider"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("clientApp").controller("MainCtrl",[function(){}]),angular.module("clientApp").directive("mostPopularNames",["$templateCache","$http",function(a,b){return{template:a.get("views/mostPopularNames.html"),restrict:"EA",link:function(a,c){a.changeGender=function(b){a.gender=b},a.submitPopular=function(){i()&&b.post("/api/popular",{range:[a.minRange,a.maxRange],number:a.nTop,startsWith:a.startsWith,gender:a.gender}).then(function(b){c.find("#namesChart").height(75*b.data.length+"px");var e=k(b.data);a.namesResults=e[0];var f=e[1];a.namesChartOptions=j(f,d(b.data))},function(a){console.log("An error occurred: "+a.data)})};var d=function(a){for(var b=0,c=0;c<a.length;++c)a[c].count>b&&(b=a[c].count);return b},e={value:"The number of most popular names must be a natural number between 1 and 100.",startsWith:"The 'starts with' value must be string of characters in the alphabet."},f=function(a){return a%1===0},g=function(){var b=parseFloat(a.nTop);return f(b)&&void 0!==b&&b>0&&101>b},h=function(){return/^[a-zA-Z]+$/.test(a.startsWith)},i=function(){a.errorMessages=[];var b=g();b||a.errorMessages.push(e.value);var c=h();return c||a.errorMessages.push(e.startsWith),b&&c},j=function(a,b){return{yaxis:{ticks:a,autoscaleMargin:null},xaxis:{show:!1,autoscaleMargin:null},series:{bars:{numbers:{show:function(a){return a.toLocaleString()},xAlign:function(a){return Math.max(a-.015*b,.01*b)},rotate:90},show:!0,horizontal:!0,barWidth:.8,align:"center"}},grid:{color:"#fff",margin:20,labelMargin:10}}},k=function(a){for(var b=[],c=[],d=0;d<a.length;++d)b.push([a[d].count,a.length-d]),c.push([a.length-d,a[d].name+" ("+(d+1)+")"]);return[[b],c]};a.nTop=5,a.startsWith="Abra",a.min=1880,a.max=2014,a.minRange=1989,a.maxRange=2014,a.namesChartOptions=j()}}}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/main.html","<div most-popular-names></div>"),a.put("views/mostPopularNames.html",'<div class="page-header"> <h1>name prospector <small>searching for names</small></h1> </div> <div class="form-group"> <div class="row"> <label>The number of most popular names</label> </div> <input class="form-control" type="text" placeholder="e.g. 5" ng-model="nTop"> </div> <div class="form-group"> <div class="row"> <label>Matching a gender</label> </div> <div class="btn-group" role="group" aria-label="..." data-toggle="buttons"> <label id="maleRadioBtn" class="btn btn-default" ng-click="changeGender(\'Male\')"> <input type="radio" value="Male"> Male </label> <label id="femaleRadioBtn" class="btn btn-default" ng-click="changeGender(\'Female\')"> <input type="radio" value="Female"> Female </label> <label id="bothRadioBtn" class="btn btn-default active" ng-click="changeGender(\'Both\')"> <input type="radio" value="Both"> Both </label> </div> </div> <div class="form-group"> <div class="row"> <label>In a range of years</label> </div> <span range-slider min="min" max="max" model-min="minRange" model-max="maxRange" step="1" show-values="true"></span> </div> <div class="form-group"> <div class="row"> <label>Starting with certain characters</label> </div> <input class="form-control" type="text" placeholder="e.g. Fre" ng-model="startsWith"> </div> <div class="form-group"> <input class="btn btn-primary" type="submit" value="Submit" ng-click="submitPopular()"> </div> <div class="alert alert-danger alert-dismissible fade in" role="alert" ng-repeat="message in errorMessages"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span></button> <strong>Input Error!</strong> {{message}} </div> <div id="namesChart" class="flot-container"> <flot class="flot-placeholder" dataset="namesResults" options="namesChartOptions"></flot> </div>')}]);